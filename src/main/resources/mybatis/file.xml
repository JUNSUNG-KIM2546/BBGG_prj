<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="file">
    <insert id="insertFile">
        INSERT INTO tbl_item_file
        (
            saved_name
            , original_name
            , file_path
            , file_ext
            , file_size
            , regist_date
            , item_no
        )
        VALUES
       (
       	#{savedName}
       	, #{originalName}
       	, #{filePath}
       	, #{fileExt}
       	, #{fileSize}
       	, NOW()
       	, 40
       )
       <selectKey keyProperty="fileNo" resultType="Long" order="AFTER">
       		SELECT LAST_INSERT_ID()
       </selectKey>
    </insert>
    
    <select id="selectFileList" resultType="FileVO">
    	SELECT *
    	FROM tbl_item_file
    	ORDER BY regist_date DESC
    </select>
</mapper>